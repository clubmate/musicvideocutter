scene_detection:
  method: hash                # adaptive | content | threshold_params | histogram | hash
  min_scene_len: 6            # Alternative: Frames (nur falls Sekunden nicht gesetzt)
# min_scene_len_seconds: 1    # Mindestdauer einer Szene (Sek.)

  # Rolling-average adaptive content change (robust bei Kamerabewegung)
  adaptive:
    adaptive_threshold: 3.0   # 3.0 / Ratio-Schwelle (niedriger = sensibler)
    window_width: 2           # Fensterbreite für gleitenden Durchschnitt
    min_content_val: 15.0     # Mindest-Content-Wert (Filter gegen Rauschen)

  # Feste Schwelle auf HSV-Änderung (klassische harte Schnitte)
  content:
    threshold: 27.0           # 27.0 / Pixeländerungs-Schwelle (niedriger = mehr Schnitte)
    luma_only: false          # true = nur Helligkeit (stabiler, weniger Schnitte)

  # Helligkeits-basierte Fades (fade in/out, dunkle Übergänge)
  threshold_params:
    threshold: 12             # 12 / Helligkeitsgrenze (0-255) für Fades
    fade_bias: 0.0            # -1..+1 verschiebt Schnittposition innerhalb des Fades
    add_final_scene: false    # true = fügt Szene am Videoende hinzu falls Fade-Out

  # Y-Kanal Histogramm-Differenz (stabil bei Farb-/Lichtwechseln)
  histogram:
    threshold: 0.05           # 0.05 /0..1 relative Differenz (kleiner = sensibler)
    bins: 256                 # Histogramm-Bins (höher = genauer, langsamer)

  # Perceptual Hash Differenzen (robust gegen kleine Pixeländerungen, aber langsamer)
  hash:
    threshold: 0.395          # 0.395 / 0..1 Hamming-Distanz / (size*size) (kleiner = sensibler)
    size: 16                  # DCT Low-Frequency-Größe
    lowpass: 2                # 2 behält 1/2, 4 behält 1/4 der Frequenzen


# TESTS
# HAIYITI - SWEET

# DEFAULT
# ADAPTIVE: 57 CUTS
# CONTENT: 76 CUTS
# THRESHOLD: 57 CUTS
# HISTOGRAM: 79 CUTS
# HASH: 101 CUTS



grouping:
  # Aktivierung erfolgt über CLI Flag --group
  similarity_threshold: 0.10   # 0.45 # 0..1 kombinierte Distanz (Histogramm + Hash) (höher = strengere Gruppen)
  hist_bins: 32                # Histogramm-Bins pro HSV-Kanal
  hash_size: 16                # pHash Größe (16 => 256 Bits)
  weight_hist: 0.5             # Gewicht Histogramm-Distanz
  weight_hash: 0.5             # Gewicht Hash-Distanz
  min_cluster_size: 2          # Mindestanzahl Segmente für Merge
  show_progress: true          # Fortschrittsbalken anzeigen
  log_details: true            # Feature-/Cluster-Statistiken loggen
  skip_concat: false           # Nur Clustering (kein ffmpeg concat) für Debug
  debug_dir: debug_grouping    # Optionaler Debug-Output (z.B. Feature-Dumps) – derzeit nicht genutzt


transition:
  type: hard_cut       # (Deaktiviert) hard_cut | fade_in_out
  fade_duration: 1.0   # Fade-Dauer in Sekunden (nur bei fade_in_out)

output:
  download_dir: output          # Basis-Verzeichnis für Downloads
  temp_dir: temp_segments       # Zielordner für geschnittene Szenen
  merged_dir: merged_videos     # (Deaktiviert) Ausgabeordner für gemergte Gruppen
